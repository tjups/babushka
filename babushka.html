<!DOCTYPE html>
<html lang="da">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Babushka</title>

</head>



<body>
    <header>

        <img src="" alt="">

        <nav>

            <button id="filter-alle">Alle</button>
            <button id="filter-forretter">Forretter</button>
            <button id="filter-hovedretter">Hovedretter</button>
            <button id="filter-desserter">Desserter</button>
            <button id="filter-drikkevarer">Drikkevarer</button>
            <button id="filter-sideorders">Sideorders</button>

        </nav>

    </header>

    <main>

        <h1 id="overskrift" data-overskrift>Menu</h1>



        <section id="menu-container" data-container class="liste"></section>
    </main>




    <footer></footer>

    <template data-template>
           <article class="ret">

                <h2 class="info" data-navn></h2>
                <img src="" alt="" class="info" data-billede>
                <p class="info" data-kortbeskrivelse></p>
               <p>Pris: <span class="info" data-pris >,-</span></p>

            </article>
        </template>



    <script>
        document.addEventListener("DOMContentLoaded", hentJson)

        let menu;

        async function hentJson() {
            console.log("hent json")

            let jsonData = await fetch("menu.json");
            menu = await jsonData.json();
            visMenu(menu, "Menu");
            lavFiltre();
        }

        function visMenu(menu, overskrift) {

            console.log("vis menu")

            let temp = document.querySelector("[data-template]");
            let dest = document.querySelector("[data-container]");

            document.querySelector("[data-overskrift]").textContent = overskrift;

            dest.innerHTML = "";

            menu.forEach(ret => {



                let klon = temp.cloneNode(true).content;

                klon.querySelector("[data-navn]").textContent = ret.navn;

                klon.querySelector("[data-kortbeskrivelse]").textContent = ret.kortbeskrivelse;

                klon.querySelector("[data-billede]").src = "imgs/small/" + ret.billede + "-sm.jpg";
                klon.querySelector("[data-billede]").alt = "billede af " + ret.navn;



                klon.querySelector("[data-pris]").textContent = "kr. " + ret.pris;

                dest.appendChild(klon);





            });

        }

        function lavFiltre() {



            let forretter = menu.filter(ret => ret.kategori == "forretter");
            let hovedretter = menu.filter(ret => ret.kategori == "hovedretter");
            let desserter = menu.filter(ret => ret.kategori == "desserter");
            let drikkevarer = menu.filter(ret => ret.kategori == "drikkevarer");
            let sideorders = menu.filter(ret => ret.kategori == "sideorders");



            document.querySelector("#filter-alle").addEventListener("click", () => {
                visMenu(menu, "Menu")
            });

            document.querySelector("#filter-forretter").addEventListener("click", () => {
                visMenu(forretter, "Forretter")
            });

            document.querySelector("#filter-hovedretter").addEventListener("click", () => {
                visMenu(hovedretter, "Hovedretter")
            });

            document.querySelector("#filter-desserter").addEventListener("click", () => {
                visMenu(desserter, "Desserter")
            });

            document.querySelector("#filter-drikkevarer").addEventListener("click", () => {
                visMenu(drikkevarer, "Drikkevarer")
            });

            document.querySelector("#filter-sideorders").addEventListener("click", () => {
                visMenu(sideorders, "Sideorders")
            });
        }
    </script>


</body>


<style>
    body {
        margin: 0;

    }

    img {
        max-width: 100%;
    }

    .liste {
        display: grid;
        grid-template-columns: 1fr;

    }

    .ret {
        margin: 5vw;
    }

    h2 {
        height: 2em;
    }

    @media screen and (min-width: 445px) {
        .liste {
            grid-template-columns: 1fr 1fr;

        }





    }

    @media screen and (min-width: 1000px) {
        .liste {
            grid-template-columns: repeat(3, 1fr);

        }
    }
</style>


</html>
